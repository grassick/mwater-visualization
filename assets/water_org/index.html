<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Water.org Visualization Demo</title>
        <link rel="stylesheet" type="text/css" href="libs.css">
        <link rel="stylesheet" type="text/css" href="index.css">
        <style>
            html, body { height: 100%;}
        </style>
    </head>
    <body>
        <script src="libs.js" type="text/javascript"></script>
        <script src="index.js" type="text/javascript"></script>
        <div id="dashboard_view" style="padding-top: 10px; height: 100%;"></div>
        <script type="text/javascript">

/* This is an initial design with a chart. For a blank dashboard, use:

var design = { items: {} };
 */

var design = {
  "items": {
    "2a55945f-2706-41a9-8aa6-f99e92bdba93": {
      "layout": {
        "x": 0,
        "y": 0,
        "w": 8,
        "h": 8
      },
      "widget": {
        "type": "LayeredChart",
        "design": {
          "version": 1,
          "type": "donut",
          "layers": [
            {
              "axes": {
                "y": {
                  "expr": {
                    "type": "scalar",
                    "table": "countries",
                    "joins": [],
                    "expr": {
                      "type": "count",
                      "table": "countries"
                    }
                  },
                  "aggr": "count"
                },
                "color": {
                  "expr": {
                    "type": "scalar",
                    "table": "countries",
                    "joins": [],
                    "expr": {
                      "type": "field",
                      "table": "countries",
                      "column": "continent"
                    }
                  }
                }
              },
              "filter": null,
              "table": "countries"
            }
          ]
        }
      }
    }
  }
}

/* Load the dashboard */
require('water-org-visualization').loadDashboard({ 
  schemaUrl: "http://dev-portal.water.org//tablemaps/tableMap.yaml", 
  queryUrl: "http://dev-portal.water.org/index.php/visualization?query={query}",
  elemId: "dashboard_view",
  design: design
});


        </script>
    </body>
</html>
